<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÎÇúÏù¥ÎèÑÎ≥Ñ ÌÄ¥Ï¶à Ïï±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .quiz-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 2rem;
            max-width: 700px;
            width: 100%;
            text-align: center;
        }

        .quiz-header {
            margin-bottom: 2rem;
        }

        .quiz-title {
            color: #333;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .difficulty-selector {
            margin: 1.5rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .difficulty-title {
            color: #333;
            font-size: 1.2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .difficulty-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .difficulty-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 24px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            min-width: 100px;
        }

        .difficulty-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .difficulty-btn.active {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.4);
        }

        .difficulty-btn.easy {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .difficulty-btn.medium {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
        }

        .difficulty-btn.hard {
            background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);
        }

        .quiz-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .score-display {
            font-size: 1.1rem;
            color: #333;
            font-weight: 600;
        }

        .difficulty-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .timer-display {
            background: #28a745;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .timer-display.warning {
            background: #ffc107;
            color: #333;
        }

        .timer-display.danger {
            background: #dc3545;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .quiz-progress {
            background: #f0f0f0;
            border-radius: 20px;
            height: 10px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            border-radius: 20px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .question-container {
            margin: 2rem 0;
        }

        .question {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 1.5rem;
            line-height: 1.6;
            font-weight: 500;
        }

        .answers {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .answer-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 1rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .answer-btn:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .answer-btn.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .answer-btn.correct {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        .answer-btn.incorrect {
            background: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        .controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 0.8rem 2rem;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.3s ease;
            font-weight: 600;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-start {
            background: linear-gradient(90deg, #28a745, #20c997);
            font-size: 1.2rem;
            padding: 1rem 2rem;
        }

        .final-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .final-score h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .score-breakdown {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            margin: 0.5rem 0;
        }

        .hidden {
            display: none;
        }

        .home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .home-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .start-screen {
            text-align: center;
        }

        .start-screen h2 {
            color: #333;
            margin-bottom: 1rem;
        }

        .start-screen p {
            color: #666;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .quiz-container {
                padding: 1.5rem;
            }
            
            .quiz-title {
                font-size: 1.5rem;
            }
            
            .question {
                font-size: 1.1rem;
            }
            
            .quiz-info {
                flex-direction: column;
            }
            
            .difficulty-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .difficulty-btn {
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="home-btn">‚Üê ÌôàÏúºÎ°ú</a>
    
    <div class="quiz-container">
        <!-- ÏãúÏûë ÌôîÎ©¥ -->
        <div id="start-screen" class="start-screen">
            <div class="quiz-header">
                <h1 class="quiz-title">üìö ÎÇúÏù¥ÎèÑÎ≥Ñ ÏÉÅÏãù ÌÄ¥Ï¶à</h1>
                <p>ÏõêÌïòÎäî ÎÇúÏù¥ÎèÑÎ•º ÏÑ†ÌÉùÌïòÍ≥† ÌÄ¥Ï¶àÎ•º ÏãúÏûëÌïòÏÑ∏Ïöî!</p>
            </div>

            <div class="difficulty-selector">
                <h3 class="difficulty-title">ÎÇúÏù¥ÎèÑ ÏÑ†ÌÉù</h3>
                <div class="difficulty-buttons">
                    <button class="difficulty-btn easy active" onclick="selectDifficulty('easy')">
                        üü¢ Ïâ¨ÏõÄ (Ï¥àÍ∏â)
                    </button>
                    <button class="difficulty-btn medium" onclick="selectDifficulty('medium')">
                        üü° Î≥¥ÌÜµ (Ï§ëÍ∏â)
                    </button>
                    <button class="difficulty-btn hard" onclick="selectDifficulty('hard')">
                        üî¥ Ïñ¥Î†§ÏõÄ (Í≥†Í∏â)
                    </button>
                </div>
            </div>

            <div style="margin: 2rem 0;">
                <h2>ÏÑ†ÌÉùÎêú ÎÇúÏù¥ÎèÑ: <span id="selected-difficulty-name">Ïâ¨ÏõÄ</span></h2>
                <p id="difficulty-description">Ï¥àÎì±ÌïôÏÉùÎèÑ Ïïå Ïàò ÏûàÎäî Í∏∞Î≥∏ ÏÉÅÏãù Î¨∏Ï†ú</p>
            </div>

            <button class="btn btn-start" onclick="startQuiz()">ÌÄ¥Ï¶à ÏãúÏûëÌïòÍ∏∞</button>
        </div>

        <!-- ÌÄ¥Ï¶à ÌôîÎ©¥ -->
        <div id="quiz-screen" class="hidden">
            <div class="quiz-header">
                <h1 class="quiz-title">ÏÉÅÏãù ÌÄ¥Ï¶à</h1>
                <div class="quiz-info">
                    <div class="score-display">
                        Ï†êÏàò: <span id="current-score">0</span> / <span id="total-questions">0</span>
                    </div>
                    <div class="difficulty-display" id="current-difficulty">Ïâ¨ÏõÄ</div>
                    <div class="timer-display" id="timer">30</div>
                </div>
                <div class="quiz-progress">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
            </div>

            <div class="question-container">
                <div class="question" id="question"></div>
                <div class="answers" id="answers"></div>
            </div>
            
            <div class="controls">
                <button class="btn btn-secondary" id="prev-btn" onclick="previousQuestion()">Ïù¥Ï†Ñ</button>
                <button class="btn" id="next-btn" onclick="nextQuestion()">Îã§Ïùå</button>
            </div>
        </div>

        <!-- Í≤∞Í≥º ÌôîÎ©¥ -->
        <div id="final-result" class="hidden">
            <div class="final-score">
                <h2>üéâ ÌÄ¥Ï¶à ÏôÑÎ£å!</h2>
                <div class="score-breakdown">
                    <div class="score-item">
                        <span>ÎÇúÏù¥ÎèÑ:</span>
                        <span id="final-difficulty"></span>
                    </div>
                    <div class="score-item">
                        <span>ÏµúÏ¢Ö Ï†êÏàò:</span>
                        <span id="final-score"></span>
                    </div>
                    <div class="score-item">
                        <span>Ï†ïÎãµÎ•†:</span>
                        <span id="accuracy"></span>
                    </div>
                    <div class="score-item">
                        <span>ÌèâÍ∑† ÏãúÍ∞Ñ:</span>
                        <span id="average-time"></span>
                    </div>
                </div>
                <p id="result-message"></p>
            </div>
            <div class="controls">
                <button class="btn" onclick="restartQuiz()">Îã§Ïãú ÏãúÏûë</button>
                <button class="btn btn-secondary" onclick="goToStart()">ÎÇúÏù¥ÎèÑ Î≥ÄÍ≤Ω</button>
            </div>
        </div>
    </div>

    <script>
        // ÎÇúÏù¥ÎèÑÎ≥Ñ Î¨∏Ï†ú Îç∞Ïù¥ÌÑ∞
        const quizDatabase = {
            easy: [
                {
                    question: "ÎåÄÌïúÎØºÍµ≠Ïùò ÏàòÎèÑÎäî Ïñ¥ÎîîÏù∏Í∞ÄÏöî?",
                    answers: ["ÏÑúÏö∏", "Î∂ÄÏÇ∞", "ÎåÄÍµ¨", "Ïù∏Ï≤ú"],
                    correct: 0,
                    timeLimit: 30
                },
                {
                    question: "1ÎÖÑÏùÄ Î™á Í∞úÏõîÏù∏Í∞ÄÏöî?",
                    answers: ["10Í∞úÏõî", "11Í∞úÏõî", "12Í∞úÏõî", "13Í∞úÏõî"],
                    correct: 2,
                    timeLimit: 30
                },
                {
                    question: "Î¨ºÏùò ÎÅìÎäîÏ†êÏùÄ ÏÑ≠Ïî® Î™á ÎèÑÏù∏Í∞ÄÏöî?",
                    answers: ["90ÎèÑ", "95ÎèÑ", "100ÎèÑ", "105ÎèÑ"],
                    correct: 2,
                    timeLimit: 30
                },
                {
                    question: "ÌÉúÏñëÏùÄ Ïñ¥Îäê Î∞©Ìñ•ÏóêÏÑú Îú®ÎÇòÏöî?",
                    answers: ["ÏÑúÏ™Ω", "ÎèôÏ™Ω", "ÎÇ®Ï™Ω", "Î∂ÅÏ™Ω"],
                    correct: 1,
                    timeLimit: 30
                },
                {
                    question: "ÌïúÍµ≠Ïùò Íµ≠ÌôîÎäî Î¨¥ÏóáÏù∏Í∞ÄÏöî?",
                    answers: ["Ïû•ÎØ∏", "Î¨¥Í∂ÅÌôî", "Íµ≠Ìôî", "Î≤öÍΩÉ"],
                    correct: 1,
                    timeLimit: 30
                }
            ],
            medium: [
                {
                    question: "ÌÉúÏñëÍ≥ÑÏóêÏÑú Í∞ÄÏû• ÌÅ∞ ÌñâÏÑ±ÏùÄ?",
                    answers: ["ÌÜ†ÏÑ±", "Î™©ÏÑ±", "Ìï¥ÏôïÏÑ±", "Ï≤úÏôïÏÑ±"],
                    correct: 1,
                    timeLimit: 25
                },
                {
                    question: "ÏÑ∏Í≥ÑÏóêÏÑú Í∞ÄÏû• ÎÜíÏùÄ ÏÇ∞ÏùÄ?",
                    answers: ["ÏóêÎ≤†Î†àÏä§Ìä∏", "K2", "Ïπ∏Ï≤∏Ï§ëÍ∞Ä", "Î°úÏ≤¥"],
                    correct: 0,
                    timeLimit: 25
                },
                {
                    question: "Î¨¥ÏßÄÍ∞úÏùò ÏÉâÍπî ÏàòÎäî?",
                    answers: ["5Í∞ú", "6Í∞ú", "7Í∞ú", "8Í∞ú"],
                    correct: 2,
                    timeLimit: 25
                },
                {
                    question: "Í¥ëÌï©ÏÑ±ÏùÑ ÌïòÎäî ÏãùÎ¨ºÏùò ÎÖπÏÉâ ÏÉâÏÜåÎäî?",
                    answers: ["Ìó§Î™®Í∏ÄÎ°úÎπà", "ÌÅ¥Î°úÎ°úÌïÑ", "Î©úÎùºÎãå", "Ïπ¥Î°úÌã¥"],
                    correct: 1,
                    timeLimit: 25
                },
                {
                    question: "ÏßÄÍµ¨ÏóêÏÑú Îã¨ÍπåÏßÄÏùò Í±∞Î¶¨Îäî ÏïΩ Î™á kmÏù∏Í∞ÄÏöî?",
                    answers: ["38Îßåkm", "48Îßåkm", "58Îßåkm", "68Îßåkm"],
                    correct: 0,
                    timeLimit: 25
                }
            ],
            hard: [
                {
                    question: "ÏñëÏûêÏó≠ÌïôÏùò Î∂àÌôïÏ†ïÏÑ± ÏõêÎ¶¨Î•º Ï≤òÏùå Ï†úÏãúÌïú Î¨ºÎ¶¨ÌïôÏûêÎäî?",
                    answers: ["ÏïÑÏù∏ÏäàÌÉÄÏù∏", "Î≥¥Ïñ¥", "ÌïòÏù¥Ï††Î≤†Î•¥ÌÅ¨", "ÏäàÎ¢∞Îî©Í±∞"],
                    correct: 2,
                    timeLimit: 20
                },
                {
                    question: "DNAÏùò Ïù¥Ï§ëÎÇòÏÑ† Íµ¨Ï°∞Î•º Î∞úÍ≤¨Ìïú Í≥ºÌïôÏûêÎäî?",
                    answers: ["ÏôìÏä®Í≥º ÌÅ¨Î¶≠", "Î©òÎç∏", "Îã§Ïúà", "ÌååÏä§Ìá¥Î•¥"],
                    correct: 0,
                    timeLimit: 20
                },
                {
                    question: "ÏÉÅÎåÄÏÑ±Ïù¥Î°†ÏóêÏÑú E=mc¬≤Ïùò cÎäî Î¨¥ÏóáÏùÑ ÏùòÎØ∏ÌïòÎÇòÏöî?",
                    answers: ["Ï§ëÎ†•ÏÉÅÏàò", "ÎπõÏùò ÏÜçÎèÑ", "ÌîåÎûëÌÅ¨ ÏÉÅÏàò", "Î≥ºÏ∏†Îßå ÏÉÅÏàò"],
                    correct: 1,
                    timeLimit: 20
                },
                {
                    question: "ÏÑ∏Ìè¨Ïùò ÎØ∏ÌÜ†ÏΩòÎìúÎ¶¨ÏïÑÏùò Ï£ºÏöî Í∏∞Îä•ÏùÄ?",
                    answers: ["Îã®Î∞±Ïßà Ìï©ÏÑ±", "ÏóêÎÑàÏßÄ ÏÉùÏÇ∞", "Ïú†Ï†ÑÏûê Î≥¥Í¥Ä", "ÏÑ∏Ìè¨ Î∂ÑÏó¥"],
                    correct: 1,
                    timeLimit: 20
                },
                {
                    question: "ÌôîÌïô ÏõêÏÜå Ï£ºÍ∏∞Ïú®ÌëúÎ•º Ï≤òÏùå ÎßåÎì† Í≥ºÌïôÏûêÎäî?",
                    answers: ["ÎùºÎ∂ÄÏïÑÏßÄÏóê", "Î©òÎç∏Î†àÏòàÌîÑ", "ÏïÑÎ≥¥Í∞ÄÎìúÎ°ú", "ÎèåÌÑ¥"],
                    correct: 1,
                    timeLimit: 20
                }
            ]
        };

        const difficultySettings = {
            easy: {
                name: "Ïâ¨ÏõÄ (Ï¥àÍ∏â)",
                description: "Ï¥àÎì±ÌïôÏÉùÎèÑ Ïïå Ïàò ÏûàÎäî Í∏∞Î≥∏ ÏÉÅÏãù Î¨∏Ï†ú",
                color: "#28a745",
                scoreMultiplier: 1
            },
            medium: {
                name: "Î≥¥ÌÜµ (Ï§ëÍ∏â)",
                description: "Ï§ëÍ≥†Îì±ÌïôÏÉù ÏàòÏ§ÄÏùò ÏùºÎ∞ò ÏÉÅÏãù Î¨∏Ï†ú",
                color: "#ffc107",
                scoreMultiplier: 1.5
            },
            hard: {
                name: "Ïñ¥Î†§ÏõÄ (Í≥†Í∏â)",
                description: "ÎåÄÌïôÏÉù Ïù¥ÏÉÅÏùò Ï†ÑÎ¨∏ ÏßÄÏãùÏù¥ ÌïÑÏöîÌïú Î¨∏Ï†ú",
                color: "#dc3545",
                scoreMultiplier: 2
            }
        };

        let currentDifficulty = 'easy';
        let currentQuizData = [];
        let currentQuestion = 0;
        let score = 0;
        let selectedAnswer = -1;
        let userAnswers = [];
        let timeLeft = 30;
        let timer = null;
        let startTime = null;
        let questionTimes = [];

        function selectDifficulty(difficulty) {
            currentDifficulty = difficulty;
            
            // Î≤ÑÌäº Ïä§ÌÉÄÏùº ÏóÖÎç∞Ïù¥Ìä∏
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ÏÑ†ÌÉùÎêú ÎÇúÏù¥ÎèÑ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            const setting = difficultySettings[difficulty];
            document.getElementById('selected-difficulty-name').textContent = setting.name;
            document.getElementById('difficulty-description').textContent = setting.description;
        }

        function startQuiz() {
            currentQuizData = [...quizDatabase[currentDifficulty]];
            currentQuestion = 0;
            score = 0;
            userAnswers = [];
            questionTimes = [];
            
            // ÌôîÎ©¥ Ï†ÑÌôò
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            
            // UI Ï¥àÍ∏∞Ìôî
            document.getElementById('total-questions').textContent = currentQuizData.length;
            document.getElementById('current-difficulty').textContent = difficultySettings[currentDifficulty].name;
            document.getElementById('current-score').textContent = '0';
            
            // Ï≤´ Î¨∏Ï†ú ÏãúÏûë
            showQuestion();
            updateProgress();
            updateNavigation();
            startTimer();
        }

        function showQuestion() {
            const question = currentQuizData[currentQuestion];
            document.getElementById('question').textContent = `${currentQuestion + 1}. ${question.question}`;
            
            const answersContainer = document.getElementById('answers');
            answersContainer.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = `${String.fromCharCode(65 + index)}. ${answer}`;
                button.onclick = () => selectAnswer(index);
                
                if (userAnswers[currentQuestion] !== undefined) {
                    if (index === userAnswers[currentQuestion]) {
                        button.classList.add('selected');
                    }
                }
                
                answersContainer.appendChild(button);
            });
            
            selectedAnswer = userAnswers[currentQuestion] || -1;
            
            // ÌÉÄÏù¥Î®∏ Ï¥àÍ∏∞Ìôî
            timeLeft = question.timeLimit || 30;
            startTime = Date.now();
            startTimer();
        }

        function selectAnswer(answerIndex) {
            if (timer) {
                const timeTaken = Date.now() - startTime;
                questionTimes[currentQuestion] = timeTaken;
            }
            
            selectedAnswer = answerIndex;
            userAnswers[currentQuestion] = answerIndex;
            
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === answerIndex) {
                    btn.classList.add('selected');
                }
            });
            
            // ÏûêÎèôÏúºÎ°ú Îã§Ïùå Î¨∏Ï†úÎ°ú Ïù¥Îèô (ÏÑ†ÌÉùÏ†Å)
            clearTimeout(timer);
            setTimeout(() => {
                if (currentQuestion < currentQuizData.length - 1) {
                    nextQuestion();
                } else {
                    finishQuiz();
                }
            }, 1000);
        }

        function startTimer() {
            clearTimeout(timer);
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearTimeout(timer);
                    // ÏãúÍ∞Ñ Ï¥àÍ≥º Ïãú ÏûêÎèôÏúºÎ°ú Îã§Ïùå Î¨∏Ï†úÎ°ú
                    if (currentQuestion < currentQuizData.length - 1) {
                        nextQuestion();
                    } else {
                        finishQuiz();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const timerElement = document.getElementById('timer');
            timerElement.textContent = `${timeLeft}Ï¥à`;
            
            if (timeLeft <= 5) {
                timerElement.className = 'timer-display danger';
            } else if (timeLeft <= 10) {
                timerElement.className = 'timer-display warning';
            } else {
                timerElement.className = 'timer-display';
            }
        }

        function nextQuestion() {
            clearTimeout(timer);
            
            if (currentQuestion < currentQuizData.length - 1) {
                currentQuestion++;
                showQuestion();
                updateProgress();
                updateNavigation();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            clearTimeout(timer);
            
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
                updateProgress();
                updateNavigation();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / currentQuizData.length) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
        }

        function updateNavigation() {
            document.getElementById('prev-btn').disabled = currentQuestion === 0;
            
            const nextBtn = document.getElementById('next-btn');
            if (currentQuestion === currentQuizData.length - 1) {
                nextBtn.textContent = 'ÏôÑÎ£å';
            } else {
                nextBtn.textContent = 'Îã§Ïùå';
            }
        }

        function finishQuiz() {
            clearTimeout(timer);
            calculateScore();
            showResults();
        }

        function calculateScore() {
            score = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === currentQuizData[index].correct) {
                    score++;
                }
            });
        }

        function showResults() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('final-result').classList.remove('hidden');
            
            const totalQuestions = currentQuizData.length;
            const accuracy = ((score / totalQuestions) * 100).toFixed(1);
            const averageTime = questionTimes.length > 0 ? 
                (questionTimes.reduce((a, b) => a + b, 0) / questionTimes.length / 1000).toFixed(1) : 0;
            
            // ÎÇúÏù¥ÎèÑÎ≥Ñ Ï†êÏàò Í≥ÑÏÇ∞
            const baseScore = score;
            const multiplier = difficultySettings[currentDifficulty].scoreMultiplier;
            const finalScore = Math.round(baseScore * multiplier);
            
            document.getElementById('final-difficulty').textContent = difficultySettings[currentDifficulty].name;
            document.getElementById('final-score').textContent = `${score} / ${totalQuestions} (√ó${multiplier} = ${finalScore}Ï†ê)`;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
            document.getElementById('average-time').textContent = `${averageTime}Ï¥à`;
            
            const resultMessage = document.getElementById('result-message');
            const percentage = parseFloat(accuracy);
            
            if (percentage >= 90) {
                resultMessage.textContent = 'üèÜ ÏôÑÎ≤ΩÌï©ÎãàÎã§! ÏÉÅÏãùÏôïÏù¥ÏãúÎÑ§Ïöî!';
                resultMessage.style.color = '#28a745';
            } else if (percentage >= 80) {
                resultMessage.textContent = 'üéâ ÌõåÎ•≠Ìï©ÎãàÎã§! Îß§Ïö∞ Ï¢ãÏùÄ ÏÑ±Í≥ºÏûÖÎãàÎã§!';
                resultMessage.style.color = '#28a745';
            } else if (percentage >= 70) {
                resultMessage.textContent = 'üëç Ï¢ãÏùÄ ÏÑ±Í≥ºÏûÖÎãàÎã§!';
                resultMessage.style.color = '#ffc107';
            } else if (percentage >= 60) {
                resultMessage.textContent = 'üòä Í¥úÏ∞ÆÏùÄ Í≤∞Í≥ºÏûÖÎãàÎã§!';
                resultMessage.style.color = '#ffc107';
            } else {
                resultMessage.textContent = 'üí™ Îçî Í≥µÎ∂ÄÌï¥ÏÑú Îã§Ïãú ÎèÑÏ†ÑÌï¥Î≥¥ÏÑ∏Ïöî!';
                resultMessage.style.color = '#dc3545';
            }
        }

        function restartQuiz() {
            startQuiz();
        }

        function goToStart() {
            document.getElementById('final-result').classList.add('hidden');
            document.getElementById('start-screen').classList.remove('hidden');
            clearTimeout(timer);
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        window.onload = function() {
            selectDifficulty('easy');
        };
    </script>
</body>
</html>